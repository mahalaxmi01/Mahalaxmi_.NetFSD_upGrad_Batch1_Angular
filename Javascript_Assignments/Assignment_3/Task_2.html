<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

<h2>Registration Form</h2>

<form>

    Name:
    <input type="text" id="name" onchange="validateName()">
    <span id="nameMsg"></span>
    <br><br>

    Email:
    <input type="text" id="email" onchange="validateEmail()">
    <span id="emailMsg"></span>
    <br><br>

    Age:
    <input type="number" id="age" onchange="validateAge()">
    <span id="ageMsg"></span>
    <br><br>

    <button type="button" onclick="saveData()">Register</button>

</form>

<p id="finalMsg"></p>

<script>

let nameValid = false;
let emailValid = false;
let ageValid = false;

function validateName() {
    let name = document.getElementById("name").value;

    if (name.trim() === "") {
        document.getElementById("nameMsg").innerText =
            "Name cannot be empty";
        nameValid = false;
    } else {
        document.getElementById("nameMsg").innerText =
            "Valid Name";
        nameValid = true;
    }
}

function validateEmail() {
    let email = document.getElementById("email").value;

    if (email.includes("@")) {
        document.getElementById("emailMsg").innerText =
            "Valid Email";
        emailValid = true;
    } else {
        document.getElementById("emailMsg").innerText =
            "Email must contain @";
        emailValid = false;
    }
}

function validateAge() {
    let age = document.getElementById("age").value;

    if (age > 18) {
        document.getElementById("ageMsg").innerText =
            "Eligible";
        ageValid = true;
    } else {
        document.getElementById("ageMsg").innerText =
            "Age must be above 18";
        ageValid = false;
    }
}

function saveData() {

    if (nameValid && emailValid && ageValid) {

        sessionStorage.setItem("userName",
            document.getElementById("name").value);

        sessionStorage.setItem("userEmail",
            document.getElementById("email").value);

        sessionStorage.setItem("userAge",
            document.getElementById("age").value);

        document.getElementById("finalMsg").innerText =
            "Registration Successful! Data stored in sessionStorage.";
    }
    else {
        document.getElementById("finalMsg").innerText =
            "Please correct all fields.";
    }
}

</script>

</body>
</html>